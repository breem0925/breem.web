<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breem - NISHIMURA SHUNSUKE</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        header {
            background-color: black;
            color: white;
            text-align: center;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        h2 {
            margin: 0;
            font-size: 3em;
            max-width: 80%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        h3 {
            margin: 5px 0;
            font-size: 1.5em;
        }
        .dots {
            animation: blink-animation 1s steps(5, start) infinite;
            -webkit-animation: blink-animation 1s steps(5, start) infinite;
            color: white;
            cursor: pointer;
        }
        @keyframes blink-animation {
            to {
                visibility: hidden;
            }
        }
        @-webkit-keyframes blink-animation {
            to {
                visibility: hidden;
            }
        }
        nav {
            text-align: center;
            margin: 20px 0;
            width: 100%;
        }
        nav ul {
            list-style-type: none;
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        nav ul li {
            margin: 0 10px;
        }
        nav ul li a {
            text-decoration: none;
            color: #000;
            font-weight: bold;
        }
        #contact {
            background-color: #eee;
            padding: 40px 20px;
            text-align: center;
            width: 100%;
        }
        .contact-form {
            background-color: #fff;
            color: #333;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: auto;
            text-align: center;
        }
        .contact-form label {
            display: block;
            margin-bottom: 10px;
        }
        .contact-form input[type="email"],
        .contact-form textarea {
            width: calc(100% - 22px);
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            resize: vertical;
        }
        .contact-form textarea {
            height: 150px;
        }
        .contact-form button {
            background-color: #000;
            color: #fff;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 4px;
        }
        .contact-form button:hover {
            background-color: #333;
        }
        footer {
            background-color: black;
            color: white;
            text-align: center;
            padding: 20px;
            width: 100%;
        }
        footer a {
            color: white;
            text-decoration: none;
            margin: 0 10px;
        }
        #tetrisModal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #tetrisContent {
            background-color: #fefefe;
            padding: 20px;
            border: 1px solid #888;
            max-width: 320px;
            width: 100%;
            box-shadow: 0px 0px 20px 5px rgba(0,0,0,0.5);
            position: relative;
        }
        #tetrisGame {
            width: 100%;
            height: 320px;
            background-color: #ddd;
            display: block;
            margin: 0 auto;
            border: 10px solid #444;
            box-shadow: inset 0px 0px 10px #000;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        .gameboy {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #bbb;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        .gameboy-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
            width: 100%;
        }
        .dpad {
            display: grid;
            grid-template-columns: repeat(3, 50px);
            grid-template-rows: repeat(3, 50px);
            gap: 5px;
        }
        .dpad button {
            background-color: #333;
            border: none;
            border-radius: 4px;
            height: 50px;
            width: 50px;
            cursor: pointer;
            color: #fff;
            font-size: 1.5em;
        }
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .action-buttons button {
            background-color: #333;
            border: none;
            border-radius: 50%;
            height: 50px;
            width: 50px;
            cursor: pointer;
            color: #fff;
            font-size: 1.2em;
        }
        #gameOverMessage {
            display: none;
            position: absolute;
            top: 0;
            width: 100%;
            text-align: center;
            font-size: 2em;
            color: red;
            animation: drop 2s forwards;
        }
        @keyframes drop {
            to {
                top: 50%;
                transform: translateY(-50%);
            }
        }
    </style>
</head>
<body>
    <header>
        <h2>breem</h2>
        <h3>NISHIMURA SHUNSUKE</h3>
        <h3>music lab<span class="dots" onclick="openTetris()">.....</span></h3>
    </header>

    <nav>
        <ul>
            <li><a href="biography.html">BIOGRAPHY</a></li>
            <li><a href="discography.html">DISCOGRAPHY</a></li>
            <li><a href="works.html">WORKS</a></li>
            <li><a href="https://breem.base.shop" target="_blank">SHOP</a></li>
            <li><a href="https://note.com/breem/" target="_blank">DIARY</a></li>
        </ul>
    </nav>

    <section id="contact">
        <h1>NEWS</h1>
        <div style="text-align: center; margin-bottom: 20px;">
            <!-- アクセスカウンター -->
            <table border="0" cellspacing="0" cellpadding="0" style="margin: 0 auto;">
                <tr><td align="center"><a href="http://www.rays-counter.com/"><img src="http://www.rays-counter.com/d1285_f6_022/667c20a465114/" alt="アクセスカウンター" border="0"></a></td></tr>
                <tr><td align="center">
                    <img src="http://www.rays-counter.com/images/counter_01.gif" border="0">
                    <img src="http://www.rays-counter.com/images/counter_02.gif" border="0">
                    <img src="http://www.rays-counter.com/images/counter_03.gif" border="0">
                    <img src="http://www.rays-counter.com/images/counter_04.gif" border="0">
                    <img src="http://www.rays-counter.com/images/counter_05.gif" border="0">
                </td></tr>
            </table>
            <!-- アクセスカウンター ここまで -->
        </div>
        <h1>CONTACT</h1>
        <div class="contact-form">
            <form id="contactForm" action="https://formspree.io/f/manwwarl" method="POST">
                <label>
                    Your email:
                    <input type="email" id="email" name="email" required>
                </label>
                <label>
                    Your message:
                    <textarea id="message" name="message" required></textarea>
                </label>
                <button type="button" onclick="confirmSend()">Send</button>
            </form>
            <p>Your message is sent successfully. Thank you!</p>
            <p>リールのメンテナンス、お仕事のご相談や依頼につきましては、上記のフォームまたは <a href="mailto:ototohi@gmail.com">ototohi@gmail.com</a> までご連絡ください。</p>
            <p>For any inquiries, please contact us at <a href="mailto:ototohi@gmail.com">ototohi@gmail.com</a> or send us a message using the form.</p>
        </div>
    </section>

    <footer>
        <div class="social-links">
            <a href="https://www.instagram.com/breem.room_4473/">Instagram</a>
            <a href="https://soundcloud.com/user-677174121">soundcloud</a>
        </div>
        <p>office: breem music lab & Reel maintenance</p>
        <p>〒739-2402 広島県安芸津町三津4473-3 本宮アパート1F</p>
        <p>当サイトの情報を転載、複製、改変等は禁止いたします 協力感謝します</p>
        <p>This site information is copyrighted. Unauthorized reproduction, modification, or copying is prohibited.</p>
        <p>谢谢你</p>
        <p>السَّلَامُ عَلَيْكُمْ</p>
    </footer>

    <!-- Tetris Modal -->
    <div id="tetrisModal">
        <div id="tetrisContent" class="gameboy">
            <span class="close" onclick="closeTetris()">&times;</span>
            <canvas id="tetrisGame" width="320" height="640"></canvas>
            <div class="gameboy-buttons">
                <div class="dpad">
                    <button onclick="moveLeft()">←</button>
                    <div></div>
                    <button onclick="moveRight()">→</button>
                    <div></div>
                    <button onclick="moveDown()">↓</button>
                </div>
                <div class="action-buttons">
                    <button onclick="rotateTetromino()">A</button>
                    <button onclick="rotateTetrominoReverse()">B</button>
                </div>
            </div>
            <div id="gameOverMessage">GAME OVER</div>
        </div>
    </div>

    <audio id="bgm" loop>
        <source src="https://freesound.org/data/previews/348/348682_3248244-lq.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>

    <audio id="lineClearSound">
        <source src="https://freesound.org/data/previews/198/198841_285997-lq.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>

    <audio id="gameOverSound">
        <source src="https://freesound.org/data/previews/353/353227_5121236-lq.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>

    <script>
        const dots = document.querySelector('.dots');
        const bgm = document.getElementById('bgm');
        const lineClearSound = document.getElementById('lineClearSound');
        const gameOverSound = document.getElementById('gameOverSound');
        const gameOverMessage = document.getElementById('gameOverMessage');

        setInterval(() => {
            dots.style.visibility = dots.style.visibility === 'hidden' ? 'visible' : 'hidden';
        }, 500);

        function confirmSend() {
            if (confirm("Are you sure you want to send this message?")) {
                document.getElementById("contactForm").submit();
            }
        }

        let tetromino;
        let playfield;
        let count;
        let requestId;

        function openTetris() {
            bgm.play();
            document.getElementById('tetrisModal').style.display = 'block';
            initTetris();
        }

        function closeTetris() {
            bgm.pause();
            document.getElementById('tetrisModal').style.display = 'none';
            cancelAnimationFrame(requestId);
        }

        window.onclick = function(event) {
            const modal = document.getElementById('tetrisModal');
            if (event.target == modal) {
                closeTetris();
            }
        }

        function initTetris() {
            const canvas = document.getElementById('tetrisGame');
            const context = canvas.getContext('2d');
            const grid = 32;

            const tetrominoes = {
                'I': [
                    [0,0,0,0],
                    [1,1,1,1],
                    [0,0,0,0],
                    [0,0,0,0]
                ],
                'J': [
                    [1,0,0],
                    [1,1,1],
                    [0,0,0]
                ],
                'L': [
                    [0,0,1],
                    [1,1,1],
                    [0,0,0]
                ],
                'O': [
                    [1,1],
                    [1,1]
                ],
                'S': [
                    [0,1,1],
                    [1,1,0],
                    [0,0,0]
                ],
                'Z': [
                    [1,1,0],
                    [0,1,1],
                    [0,0,0]
                ],
                'T': [
                    [0,1,0],
                    [1,1,1],
                    [0,0,0]
                ]
            };

            const colors = {
                'I': '#00bfff',
                'O': '#ffd700',
                'T': '#9370db',
                'S': '#3cb371',
                'Z': '#dc143c',
                'J': '#4682b4',
                'L': '#ff8c00'
            };

            function generateTetromino() {
                const keys = Object.keys(tetrominoes);
                const key = keys[Math.floor(Math.random() * keys.length)];
                const matrix = tetrominoes[key];
                return {
                    name: key,
                    matrix: matrix,
                    row: 0,
                    col: Math.floor((10 - matrix[0].length) / 2)
                };
            }

            function rotate(matrix) {
                const N = matrix.length - 1;
                return matrix.map((row, i) =>
                    row.map((val, j) => matrix[N - j][i])
                );
            }

            function rotateReverse(matrix) {
                const N = matrix.length - 1;
                return matrix.map((row, i) =>
                    row.map((val, j) => matrix[j][N - i])
                );
            }

            function collide(playfield, tetromino) {
                const { matrix, row, col } = tetromino;
                for (let r = 0; r < matrix.length; r++) {
                    for (let c = 0; c < matrix[r].length; c++) {
                        if (matrix[r][c] && (playfield[r + row] && playfield[r + row][c + col]) !== 0) {
                            return true;
                        }
                    }
                }
                return false;
            }

            function clearLines() {
                outer: for (let row = playfield.length - 1; row >= 0; row--) {
                    for (let col = 0; col < playfield[row].length; col++) {
                        if (playfield[row][col] === 0) {
                            continue outer;
                        }
                    }
                    playfield.splice(row, 1);
                    playfield.unshift(new Array(10).fill(0));
                    lineClearSound.play();
                    context.clearRect(0, 0, canvas.width, canvas.height);
                    drawPlayfield();
                    drawTetromino();
                }
            }

            function freeze() {
                const { matrix, row, col } = tetromino;
                matrix.forEach((r, i) => {
                    r.forEach((value, j) => {
                        if (value) {
                            playfield[row + i][col + j] = tetromino.name;
                        }
                    });
                });
                clearLines();
                tetromino = generateTetromino();
                if (collide(playfield, tetromino)) {
                    gameOver();
                }
            }

            function drawTetromino() {
                const { matrix, row, col } = tetromino;
                matrix.forEach((r, i) => {
                    r.forEach((value, j) => {
                        if (value) {
                            context.fillStyle = colors[tetromino.name];
                            context.fillRect((col + j) * grid, (row + i) * grid, grid - 1, grid - 1);
                        }
                    });
                });
            }

            function drawPlayfield() {
                for (let row = 0; row < playfield.length; row++) {
                    for (let col = 0; col < playfield[row].length; col++) {
                        if (playfield[row][col]) {
                            context.fillStyle = colors[playfield[row][col]];
                            context.fillRect(col * grid, row * grid, grid - 1, grid - 1);
                        }
                    }
                }
            }

            function updateGame() {
                context.clearRect(0, 0, canvas.width, canvas.height);
                drawPlayfield();
                drawTetromino();
            }

            function drop() {
                tetromino.row++;
                if (collide(playfield, tetromino)) {
                    tetromino.row--;
                    freeze();
                }
            }

            count = 0;
            tetromino = generateTetromino();
            playfield = Array.from({ length: 20 }, () => Array(10).fill(0));
            function loop() {
                requestId = requestAnimationFrame(loop);
                if (++count > 35) {
                    drop();
                    count = 0;
                }
                updateGame();
            }

            document.addEventListener('keydown', (e) => {
                if (e.keyCode === 37) {
                    moveLeft();
                } else if (e.keyCode === 39) {
                    moveRight();
                } else if (e.keyCode === 40) {
                    moveDown();
                } else if (e.keyCode === 65) { // 'A' key for rotation
                    rotateTetromino();
                } else if (e.keyCode === 66) { // 'B' key for reverse rotation
                    rotateTetrominoReverse();
                }
            });

            loop();
        }

        function moveLeft() {
            tetromino.col--;
            if (collide(playfield, tetromino)) {
                tetromino.col++;
            }
        }

        function moveRight() {
            tetromino.col++;
            if (collide(playfield, tetromino)) {
                tetromino.col--;
            }
        }

        function moveDown() {
            tetromino.row++;
            if (collide(playfield, tetromino)) {
                tetromino.row--;
                freeze();
            }
        }

        function rotateTetromino() {
            const matrix = rotate(tetromino.matrix);
            if (!collide(playfield, { ...tetromino, matrix })) {
                tetromino.matrix = matrix;
            }
        }

        function rotateTetrominoReverse() {
            const matrix = rotateReverse(tetromino.matrix);
            if (!collide(playfield, { ...tetromino, matrix })) {
                tetromino.matrix = matrix;
            }
        }

        function gameOver() {
            bgm.pause();
            gameOverSound.play();
            gameOverMessage.style.display = 'block';
        }
    </script>
</body>
</html>
